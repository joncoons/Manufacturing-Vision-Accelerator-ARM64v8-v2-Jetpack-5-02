{
  "modulesContent": {
    "$edgeAgent": {
      "properties.desired": {
        "schemaVersion": "1.1",
        "runtime": {
          "type": "docker",
          "settings": {
            "minDockerVersion": "v1.25",
            "loggingOptions": "",
            "registryCredentials": {
              "aiotdevopsacr": {
                "username": "aiotdevopsacr",
                "password": "2/C71cfkJaYngXQwVCGVTCgqtk7hmvYW",
                "address": "aiotdevopsacr.azurecr.io"
              }
            }
          }
        },
        "systemModules": {
          "edgeAgent": {
            "type": "docker",
            "settings": {
              "image": "mcr.microsoft.com/azureiotedge-agent:1.4",
              "createOptions": "{}"
            },
            "env": {
              "storageFolder": {
                "value": "edge_agent_volume"
              }
            }
          },
          "edgeHub": {
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "mcr.microsoft.com/azureiotedge-hub:1.4",
              "createOptions": "{\"HostConfig\":{\"PortBindings\":{\"5671/tcp\":[{\"HostPort\":\"5671\"}],\"8883/tcp\":[{\"HostPort\":\"8883\"}],\"443/tcp\":[{\"HostPort\":\"443\"}]}}}"
            },
            "env": {
              "storageFolder": {
                "value": "edge_hub_volume"
              }
            }
          }
        },
        "modules": {
          "Mfg_Vision_CIS_v2_jp5_Monolithic": {
            "version": "1.0",
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "aiotdevopsacr.azurecr.io/mfg_vision_cis_v2_jp5_monolithic:0.1.42.0-arm64v8",
              "createOptions": "{\"NetworkingConfig\":{\"EndpointsConfig\":{\"host\":{}}},\"HostConfig\":{\"Privileged\":true,\"IpcMode\":\"host\",\"gpus\":0,\"runtime\":\"nvidia\",\"NetworkMode\":\"host\",\"Binds\":[\"/home/edge_assets/images_volume:/images_volume\",\"/home/edge_assets/model_sync:/model_volume\",\"/home/edge_assets/image_sink_volume/Mfg_Vision_CIS_v2_jp5_Monolithic:/image_sink_volume\",\"/home/edge_assets/CIS_Config/Mfg_Vision_CIS_v2_jp5_Monolithic:/config\"],\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"images_volume\",\"Target\":\"/var/opt/images_volume\"}]}}"
            },
            "env": {
              "MYSQL_DATABASE": {
                "value": "defectdb"
              },
              "MYSQL_PWD": {
                "value": "Password123"
              },
              "BOUNDARY_DETECTION": {
                "value": "false"
              }
            }
          },
          "Mfg_Vision_CIS_v2_jp5_Modular": {
            "version": "1.0",
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "aiotdevopsacr.azurecr.io/mfg_vision_cis_v2_jp5_modular:0.1.42.0-arm64v8",
              "createOptions": "{\"NetworkingConfig\":{\"EndpointsConfig\":{\"host\":{}}},\"HostConfig\":{\"Privileged\":true,\"IpcMode\":\"host\",\"gpus\":0,\"runtime\":\"nvidia\",\"NetworkMode\":\"host\",\"Binds\":[\"/home/edge_assets/images_volume:/images_volume\",\"/home/edge_assets/model_sync:/model_volume\",\"/home/edge_assets/inference_volume:/app/inference\",\"/home/edge_assets/capture_volume:/app/capture\",\"/home/edge_assets/image_sink_volume/Mfg_Vision_CIS_v2_jp5_Modular:/image_sink_volume\",\"/home/edge_assets/CIS_Config/Mfg_Vision_CIS_v2_jp5_Modular:/config\"],\"M",
              "createOptions01": "ounts\":[{\"Type\":\"volume\",\"Source\":\"images_volume\",\"Target\":\"/var/opt/images_volume\"},{\"Type\":\"volume\",\"Source\":\"inference_volume\",\"Target\":\"/var/opt/inference_volume\"},{\"Type\":\"volume\",\"Source\":\"capture_volume\",\"Target\":\"/var/opt/capture_volume\"}]}}"
            },
            "env": {
              "MYSQL_DATABASE": {
                "value": "defectdb"
              },
              "MYSQL_PWD": {
                "value": "Password123"
              },
              "BOUNDARY_DETECTION": {
                "value": "false"
              }
            }
          },
          "Mfg_Vision_v2_jp5_Model_Sync": {
            "startupOrder": 2,
            "settings": {
              "image": "aiotdevopsacr.azurecr.io/mfg_vision_v2_jp5_model_sync:0.1.42.0-arm64v8",
              "createOptions": "{\"HostConfig\":{\"Binds\":[\"/home/edge_assets/model_sync:/models\"]}}"
            },
            "type": "docker",
            "version": "1.0",
            "env": {
              "LOCAL_FILE_PATH": {
                "value": "/models/"
              },
              "STORE_CONN_STR": {
                "value": "DefaultEndpointsProtocol=https;AccountName=aiotblob;AccountKey=qqG58K7AjdmBIr+VBBfyetTrD2Oe0TxUdsigulHdoFvNU3M1MAwtQDkVKe+sUcCSwm9DG20rDWRw+AStTi7q3g==;EndpointSuffix=core.windows.net"
              },
              "BLOB_AZURE_MODEL_CONTAINER": {
                "value": "model-sync"
              }
            },
            "status": "running",
            "restartPolicy": "always"
          },
          "Mfg_Vision_v2_jp5_Capture_Repo": {
            "startupOrder": 3,
            "version": "1.0",
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "aiotdevopsacr.azurecr.io/mfg_vision_v2_jp5_capture_repo:0.1.42.0-arm64v8",
              "createOptions": "{\"HostConfig\":{\"Binds\":[\"/home/edge_assets/capture_volume:/capture_volume\"]},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"capture_volume\",\"Target\":\"/var/opt/capture_volume\"}]}"
            }
          },
          "Mfg_Vision_v2_jp5_Inference_Repo": {
            "startupOrder": 4,
            "version": "1.0",
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "aiotdevopsacr.azurecr.io/mfg_vision_v2_jp5_inference_repo:0.1.42.0-arm64v8",
              "createOptions": "{\"HostConfig\":{\"Binds\":[\"/home/edge_assets/inference_volume:/inference_volume\",\"/home/edge_assets/test_images:/test_images\"]},\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"inference_volume\",\"Target\":\"/var/opt/inference_volume\"}]}"
            }
          },
          "Mfg_Vision_v2_jp5_Image_Upload": {
            "version": "1.0",
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "aiotdevopsacr.azurecr.io/mfg_vision_v2_jp5_image_upload:0.1.42.0-arm64v8",
              "createOptions": "{\"NetworkingConfig\":{\"EndpointsConfig\":{\"host\":{}}},\"HostConfig\":{\"NetworkMode\":\"host\",\"Binds\":[\"/home/edge_assets/images_volume:/images_volume\"],\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"images_volume\",\"Target\":\"/var/opt/images\"}]}}"
            },
            "env": {
              "ADL_G2": {
                "value": "false"
              },
              "STORE_CONN_STR": {
                "value": "DefaultEndpointsProtocol=https;AccountName=aiotblob;AccountKey=qqG58K7AjdmBIr+VBBfyetTrD2Oe0TxUdsigulHdoFvNU3M1MAwtQDkVKe+sUcCSwm9DG20rDWRw+AStTi7q3g==;EndpointSuffix=core.windows.net"
              }
            }
          },
          "Mfg_Vision_v2_jp5_File_Cleanup": {
            "version": "1.0",
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "aiotdevopsacr.azurecr.io/mfg_vision_v2_jp5_file_cleanup:0.1.42.0-arm64v8",
              "createOptions": "{\"NetworkingConfig\":{\"EndpointsConfig\":{\"host\":{}}},\"HostConfig\":{\"NetworkMode\":\"host\",\"Binds\":[\"/home/edge_assets/images_volume:/images_volume\"],\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"images_volume\",\"Target\":\"/var/opt/images_volume\"}]}}"
            },
            "env": {
              "RETENTION_POLICY_SECONDS": {
                "value": "7200"
              }
            }
          },
          "Mfg_Vision_v2_jp5_mySQL": {
            "version": "1.0",
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "aiotdevopsacr.azurecr.io/mfg_vision_v2_jp5_mysql:0.1.42.0-arm64v8",
              "createOptions": "{\"NetworkingConfig\":{\"EndpointsConfig\":{\"host\":{}}},\"HostConfig\":{\"NetworkMode\":\"host\",\"Binds\":[\"/home/edge_assets/mysql_data:/var/lib_mysql\"],\"PortBindings\":{\"3306/tcp\":[{\"HostPort\":\"3306\"}]}},\"Env\":[\"MYSQL_DATABASE=defectdb\",\"MYSQL_USER=SA\",\"MYSQL_PASSWORD=Password123\"]}"
            }
          },
          "Mfg_Vision_v2_jp5_Dashboard_Custom": {
            "version": "1.0",
            "type": "docker",
            "status": "running",
            "restartPolicy": "always",
            "settings": {
              "image": "aiotdevopsacr.azurecr.io/mfg_vision_v2_jp5_dashboard_custom:0.1.42.0-arm64v8",
              "createOptions": "{\"NetworkingConfig\":{\"EndpointsConfig\":{\"host\":{}}},\"HostConfig\":{\"PortBindings\":{\"80/tcp\":[{\"HostPort\":\"22000\"}]},\"IpcMode\":\"host\",\"NetworkMode\":\"host\",\"Binds\":[\"/home/edge_assets/images_volume:/app/static/images\"],\"Mounts\":[{\"Type\":\"volume\",\"Source\":\"images_volume\",\"Target\":\"/var/opt/images_volume\"}]}}"
            },
            "env": {
              "CAMS_TO_DISPLAY": {
                "value": "1"
              },
              "MYSQL_DATABASE": {
                "value": "defectdb"
              },
              "MYSQL_USER": {
                "value": "SA"
              },
              "MYSQL_PWD": {
                "value": "Password123"
              }
            }
          }
        }
      }
    },
    "$edgeHub": {
      "properties.desired": {
        "schemaVersion": "1.1",
        "routes": {
          "Mfg_Vision_CIS_v2_jp5_Monolithic_Inference_Upload": "FROM /messages/modules/Mfg_Vision_CIS_v2_jp5_Monolithic/outputs/outputInference INTO $upstream",
          "Mfg_Vision_CIS_v2_jp5_Monolithic_Image_Upload": "FROM /messages/modules/Mfg_Vision_CIS_v2_jp5_Monolithic/outputs/outputImageSend INTO BrokeredEndpoint(\"/modules/Mfg_Vision_Image_Upload/inputs/inputImageSend\")",
          "Mfg_Vision_CIS_v2_jp5_Modular_Inference_Upload": "FROM /messages/modules/Mfg_Vision_CIS_v2_jp5_Modular/outputs/outputInference INTO $upstream",
          "Mfg_Vision_CIS_v2_jp5_Modular_Image_Upload": "FROM /messages/modules/Mfg_Vision_CIS_v2_jp5_Modular/outputs/outputImageSend INTO BrokeredEndpoint(\"/modules/Mfg_Vision_Image_Upload/inputs/inputImageSend\")"
        },
        "storeAndForwardConfiguration": {
          "timeToLiveSecs": 7200
        }
      }
    }
  }
}